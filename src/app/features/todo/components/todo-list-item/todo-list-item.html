<div class="todo-item p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all relative h-full bg-white" 
     [ngClass]="{'completed': completed()}">
  <div class="flex items-start gap-3 mb-2">
    <mat-checkbox 
      [checked]="completed()" 
      (change)="onCompletedChange($event.checked)"
      class="mt-1">
    </mat-checkbox>
    <h3 class="todo-title text-lg font-semibold flex-1 text-gray-900">{{ todo().title }}</h3>
    <button [matMenuTriggerFor]="menu" class="text-gray-400 hover:text-gray-600 -mt-1 -mr-1 p-1">
      <fa-icon [icon]="faEllipsisVertical"></fa-icon>
    </button>
  </div>
  
  <p class="todo-description line-clamp-3 mb-3 ml-9 text-gray-600">{{ todo().description }}</p>
  
  @if (todo().createdAt) {
    <p class="text-xs text-gray-400 ml-9">{{ todo().createdAt | date:'MMM d, y, h:mm a' }}</p>
  }

  <mat-menu #menu="matMenu">
    <button mat-menu-item (click)="onEdit()">
      <fa-icon [icon]="faPenToSquare" class="text-blue-600 mr-2"></fa-icon>
      <span class="text-blue-600">Edit</span>
    </button>
    <button mat-menu-item (click)="onDelete()">
      <fa-icon [icon]="faTrash" class="text-red-600 mr-2"></fa-icon>
      <span class="text-red-600">Delete</span>
    </button>
  </mat-menu>
</div>